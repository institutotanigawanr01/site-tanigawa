<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√ötero do Prop√≥sito - Diagn√≥stico Gestacional</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a2b4a 0%, #2d4a7c 100%);
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeIn 1s ease-in;
        }

        .header h1 {
            font-size: 2.8em;
            font-weight: 700;
            color: #d4af37;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(212, 175, 55, 0.3);
        }

        .header p {
            font-size: 1.1em;
            color: #5b8fd9;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            height: 8px;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #d4af37 0%, #f4d03f 100%);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }

        .trimestre-label {
            text-align: center;
            font-size: 1.2em;
            color: #f4d03f;
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: slideUp 0.6s ease-out;
        }

        .camada-titulo {
            font-size: 1.8em;
            color: #d4af37;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .camada-numero {
            background: #d4af37;
            color: #1a2b4a;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2em;
        }

        .camada-metafora {
            color: #5b8fd9;
            font-size: 0.95em;
            font-style: italic;
            margin-bottom: 25px;
            padding-left: 60px;
        }

        .pergunta {
            margin-bottom: 30px;
        }

        .pergunta-label {
            font-size: 1.1em;
            color: #ffffff;
            margin-bottom: 15px;
            font-weight: 500;
            line-height: 1.6;
        }

        textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid rgba(91, 143, 217, 0.3);
            background: rgba(255, 255, 255, 0.05);
            color: #ffffff;
            font-size: 1em;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #d4af37;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.2);
        }

        textarea::placeholder {
            color: rgba(255, 255, 255, 0.3);
        }

        /* ‚úÖ NOVO: Estado de erro de valida√ß√£o */
        textarea.invalid {
            border: 2px solid #fbbf24 !important;
            background: rgba(251, 191, 36, 0.1) !important;
            animation: shake 0.5s ease-in-out;
        }

        /* ‚úÖ NOVO: Mensagem de erro */
        .error-message {
            background: rgba(251, 191, 36, 0.15);
            border: 2px solid #fbbf24;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            color: #fbbf24;
            font-weight: 600;
            text-align: center;
            display: none;
            animation: slideDown 0.3s ease-out;
        }

        .error-message.show {
            display: block;
        }

        .error-message p {
            margin: 0;
            font-size: 1.1em;
        }

        .error-message small {
            display: block;
            margin-top: 8px;
            font-size: 0.9em;
            opacity: 0.9;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .btn {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #1a2b4a;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            display: block;
            margin: 30px auto 0;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(212, 175, 55, 0.5);
        }

        .hidden {
            display: none;
        }

        .transicao-trimestre {
            text-align: center;
            padding: 60px 40px;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(91, 143, 217, 0.2) 100%);
            border-radius: 20px;
            margin: 60px 0;
        }

        .transicao-trimestre h3 {
            font-size: 2em;
            color: #d4af37;
            margin-bottom: 20px;
        }

        .transicao-trimestre p {
            font-size: 1.2em;
            line-height: 1.8;
            color: #ffffff;
            margin-bottom: 15px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .card {
                padding: 25px;
            }
            
            .camada-titulo {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§∞ √ötero do Prop√≥sito</h1>
            <p>Diagn√≥stico Gestacional do seu Chamado</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>

        <div class="trimestre-label" id="trimestre-label">1¬∫ TRIMESTRE: CONCEP√á√ÉO</div>

        <!-- ‚úÖ NOVO: Mensagem de erro global -->
        <div class="error-message" id="error-message">
            <p>‚ö†Ô∏è Preenchimento obrigat√≥rio. Vai ser prematuro.</p>
            <small>Complete todos os campos com pelo menos 50 caracteres cada.</small>
        </div>

        <!-- 1¬∫ TRIMESTRE -->
        <div id="trimestre1">
            <!-- CAMADA 1: CONCEP√á√ÉO -->
            <div class="card" id="camada1">
                <div class="camada-titulo">
                    <span class="camada-numero">1</span>
                    <span>CAMADA 1: CONCEP√á√ÉO</span>
                </div>
                <p class="camada-metafora">
                    Met√°fora: O espermatozoide encontra o √≥vulo - DNA espiritual se forma
                </p>

                <div class="pergunta">
                    <p class="pergunta-label">
                        <strong>Quando voc√™ era crian√ßa, o que te deixava absolutamente VIVO?</strong><br>
                        N√£o pense na resposta "certa" - apenas lembre. O que fazia voc√™ esquecer do tempo?
                    </p>
                    <textarea id="concepcao1" placeholder="Quando eu era crian√ßa..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Se voc√™ pudesse usar UMA √öNICA PALAVRA para descrever quem voc√™ realmente √© (n√£o o que voc√™ faz) - qual seria?
                    </p>
                    <textarea id="concepcao2" placeholder="Eu sou..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Complete a frase: "Eu n√£o consigo ficar em paz quando vejo __________." O que provoca revolta santa em voc√™?
                    </p>
                    <textarea id="concepcao3" placeholder="Eu n√£o consigo ficar em paz quando vejo..."></textarea>
                </div>

                <button class="btn" onclick="proximaCamada(2)">Continuar para Camada 2 ‚Üí</button>
            </div>

            <!-- CAMADA 2: IMPLANTA√á√ÉO -->
            <div class="card hidden" id="camada2">
                <div class="camada-titulo">
                    <span class="camada-numero">2</span>
                    <span>CAMADA 2: IMPLANTA√á√ÉO</span>
                </div>
                <p class="camada-metafora">
                    Met√°fora: O embri√£o se fixa no √∫tero - prop√≥sito se ancora na dor/experi√™ncia
                </p>

                <div class="pergunta">
                    <p class="pergunta-label">
                        <strong>Qual foi a dor mais profunda que voc√™ j√° experimentou?</strong><br>
                        (Pode ser emocional, espiritual, relacional, f√≠sica - mas precisa ser verdadeira e profunda)
                    </p>
                    <textarea id="implantacao1" placeholder="Minha dor mais profunda foi..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        O que essa dor te ENSINOU que ningu√©m mais poderia te ensinar? Como ela te transformou?
                    </p>
                    <textarea id="implantacao2" placeholder="Essa dor me ensinou..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Se voc√™ pudesse POUPAR outras pessoas dessa mesma dor - o que voc√™ faria diferente na vida delas?
                    </p>
                    <textarea id="implantacao3" placeholder="Eu pouparia outros de..."></textarea>
                </div>

                <button class="btn" onclick="proximaCamada(3)">Continuar para Camada 3 ‚Üí</button>
            </div>

            <!-- CAMADA 3: PRIMEIRO BATIMENTO -->
            <div class="card hidden" id="camada3">
                <div class="camada-titulo">
                    <span class="camada-numero">3</span>
                    <span>CAMADA 3: PRIMEIRO BATIMENTO</span>
                </div>
                <p class="camada-metafora">
                    Met√°fora: O cora√ß√£o come√ßa a bater - seus valores centrais (o que te move)
                </p>

                <div class="pergunta">
                    <p class="pergunta-label">
                        <strong>Se voc√™ tivesse que escolher 3 valores inegoci√°veis na sua vida - aqueles pelos quais voc√™ morreria - quais seriam?</strong>
                    </p>
                    <textarea id="batimento1" placeholder="Meus 3 valores inegoci√°veis s√£o..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Quando voc√™ v√™ algu√©m vivendo esses mesmos valores na pr√°tica, o que voc√™ sente?
                    </p>
                    <textarea id="batimento2" placeholder="Eu sinto..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        E quando voc√™ v√™ esses valores sendo pisoteados ou ignorados - o que acontece dentro de voc√™?
                    </p>
                    <textarea id="batimento3" placeholder="Quando vejo isso..."></textarea>
                </div>

                <button class="btn" onclick="finalizarTrimestre1()">Completar 1¬∫ Trimestre ‚úì</button>
            </div>
        </div>

        <!-- TRANSI√á√ÉO 1¬∫ TRIMESTRE -->
        <div class="transicao-trimestre hidden" id="transicao1">
            <h3>üéâ Parab√©ns! 1¬∫ Trimestre Completo</h3>
            <p>
                Seu prop√≥sito j√° tem <strong>DNA espiritual</strong> (ess√™ncia),<br>
                est√° <strong>fixado atrav√©s da dor</strong> (implanta√ß√£o),<br>
                e come√ßou a <strong>bater</strong> (chamado prim√°rio).
            </p>
            <p style="margin-top: 20px;">
                Agora vamos para o <strong>2¬∫ Trimestre</strong>, onde ele vai se diferenciar e ganhar caracter√≠sticas √∫nicas...
            </p>
            <button class="btn" onclick="irParaTrimestre2()">Iniciar 2¬∫ Trimestre ‚Üí</button>
        </div>

        <!-- 2¬∫ TRIMESTRE -->
        <div class="hidden" id="trimestre2">
            <div class="trimestre-label">2¬∫ TRIMESTRE: DIFERENCIA√á√ÉO</div>

            <!-- CAMADA 4: MEMBROS -->
            <div class="card" id="camada4">
                <div class="camada-titulo">
                    <span class="camada-numero">4</span>
                    <span>CAMADA 4: MEMBROS</span>
                </div>
                <p class="camada-metafora">
                    Met√°fora: Bra√ßos e pernas se formam - seus dons e habilidades pr√°ticas
                </p>

                <div class="pergunta">
                    <p class="pergunta-label">
                        <strong>O que voc√™ faz melhor do que a maioria das pessoas?</strong><br>
                        N√£o seja modesto - seja honesto. Em que √°rea as pessoas naturalmente pedem sua ajuda?
                    </p>
                    <textarea id="membros1" placeholder="Eu sou excepcionalmente bom em..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Que tipo de problema voc√™ resolve quase sem esfor√ßo, enquanto outros lutam com ele?
                    </p>
                    <textarea id="membros2" placeholder="Eu resolvo facilmente..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Se voc√™ tivesse recursos ilimitados (tempo, dinheiro, equipe) - qual projeto voc√™ iniciaria AMANH√É?
                    </p>
                    <textarea id="membros3" placeholder="Eu iniciaria..."></textarea>
                </div>

                <button class="btn" onclick="proximaCamada(5)">Continuar para Camada 5 ‚Üí</button>
            </div>

            <!-- CAMADA 5: CHUTE -->
            <div class="card hidden" id="camada5">
                <div class="camada-titulo">
                    <span class="camada-numero">5</span>
                    <span>CAMADA 5: CHUTE</span>
                </div>
                <p class="camada-metafora">
                    Met√°fora: O beb√™ chuta pela primeira vez - a causa que te move, o que te tira do conforto
                </p>

                <div class="pergunta">
                    <p class="pergunta-label">
                        <strong>Qual injusti√ßa no mundo mais te revolta?</strong><br>
                        Qual situa√ß√£o, quando voc√™ v√™ ou ouve falar, faz seu sangue ferver?
                    </p>
                    <textarea id="chute1" placeholder="A injusti√ßa que mais me revolta √©..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Se voc√™ pudesse mudar UMA COISA no mundo atrav√©s do seu trabalho/minist√©rio - o que seria?
                    </p>
                    <textarea id="chute2" placeholder="Eu mudaria..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Complete: "O mundo seria diferente se mais pessoas entendessem que __________."
                    </p>
                    <textarea id="chute3" placeholder="O mundo seria diferente se..."></textarea>
                </div>

                <button class="btn" onclick="proximaCamada(6)">Continuar para Camada 6 ‚Üí</button>
            </div>

            <!-- CAMADA 6: OLHOS -->
            <div class="card hidden" id="camada6">
                <div class="camada-titulo">
                    <span class="camada-numero">6</span>
                    <span>CAMADA 6: OLHOS</span>
                </div>
                <p class="camada-metafora">
                    Met√°fora: Os olhos se abrem (ainda no √∫tero) - quem voc√™ enxerga, seu p√∫blico/destinat√°rios
                </p>

                <div class="pergunta">
                    <p class="pergunta-label">
                        <strong>Quem voc√™ enxerga quando abre os olhos?</strong><br>
                        Que grupo espec√≠fico de pessoas voc√™ sente compaix√£o natural em servir? N√£o diga "todos" - seja cir√∫rgico.
                    </p>
                    <textarea id="olhos1" placeholder="Eu enxergo..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Quando voc√™ imagina seu trabalho tendo impacto real, transformando vidas - de quem √© o rosto que voc√™ v√™? Descreva essa pessoa.
                    </p>
                    <textarea id="olhos2" placeholder="Eu vejo o rosto de..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        De todas as pessoas do mundo, qual grupo voc√™ mais gostaria de ver LIVRE, RESTAURADO, TRANSFORMADO? Por qu√™ esse grupo especificamente?
                    </p>
                    <textarea id="olhos3" placeholder="Eu quero ver livre..."></textarea>
                </div>

                <button class="btn" onclick="finalizarTrimestre2()">Completar 2¬∫ Trimestre ‚úì</button>
            </div>
        </div>

        <!-- TRANSI√á√ÉO 2¬∫ TRIMESTRE -->
        <div class="transicao-trimestre hidden" id="transicao2">
            <h3>üéâ 2¬∫ Trimestre Completo!</h3>
            <p>
                Seu prop√≥sito agora tem <strong>membros</strong> (dons pr√°ticos),<br>
                <strong>chuta</strong> contra injusti√ßas (causa),<br>
                e j√° <strong>enxerga</strong> para quem existe (destinat√°rios).
            </p>
            <p style="margin-top: 20px;">
                Agora vamos para o <strong>3¬∫ Trimestre</strong> - a prepara√ß√£o final antes do nascimento...
            </p>
            <button class="btn" onclick="irParaTrimestre3()">Iniciar 3¬∫ Trimestre ‚Üí</button>
        </div>

        <!-- 3¬∫ TRIMESTRE -->
        <div class="hidden" id="trimestre3">
            <div class="trimestre-label">3¬∫ TRIMESTRE: PREPARA√á√ÉO</div>

            <!-- CAMADA 7: RESPIRA√á√ÉO -->
            <div class="card" id="camada7">
                <div class="camada-titulo">
                    <span class="camada-numero">7</span>
                    <span>CAMADA 7: RESPIRA√á√ÉO</span>
                </div>
                <p class="camada-metafora">
                    Met√°fora: Os pulm√µes amadurecem - capacidade de respirar sozinho, seu territ√≥rio de governo
                </p>

                <div class="pergunta">
                    <p class="pergunta-label">
                        <strong>Onde voc√™ respira sozinho?</strong><br>
                        Em que contexto, ambiente ou √°rea voc√™ se sente COMPETENTE, CONFIANTE, e com AUTORIDADE natural? Onde voc√™ n√£o precisa pedir licen√ßa?
                    </p>
                    <textarea id="respiracao1" placeholder="Eu respiro sozinho em..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Se voc√™ pudesse "governar" um territ√≥rio (uma empresa, um minist√©rio, uma √°rea de conhecimento, uma comunidade) - qual seria?
                    </p>
                    <textarea id="respiracao2" placeholder="Meu territ√≥rio seria..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Complete: "As pessoas naturalmente me reconhecem como autoridade quando o assunto √© ___________."
                    </p>
                    <textarea id="respiracao3" placeholder="Sou reconhecido como autoridade em..."></textarea>
                </div>

                <button class="btn" onclick="proximaCamada(8)">Continuar para Camada 8 ‚Üí</button>
            </div>

            <!-- CAMADA 8: VOZ -->
            <div class="card hidden" id="camada8">
                <div class="camada-titulo">
                    <span class="camada-numero">8</span>
                    <span>CAMADA 8: VOZ</span>
                </div>
                <p class="camada-metafora">
                    Met√°fora: O beb√™ desenvolve capacidade de chorar - sua voz √∫nica, a mensagem que voc√™ carrega
                </p>

                <div class="pergunta">
                    <p class="pergunta-label">
                        <strong>Se voc√™ pudesse gritar UMA √öNICA VERDADE para o mundo inteiro ouvir, qual seria?</strong><br>
                        Qual mensagem voc√™ carrega que PRECISA ser dita? N√£o pense, sinta.
                    </p>
                    <textarea id="voz1" placeholder="Eu gritaria..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Se sua vida fosse um livro e voc√™ tivesse que dar um t√≠tulo de UMA FRASE - qual seria?
                    </p>
                    <textarea id="voz2" placeholder="T√≠tulo do livro da minha vida..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Quando voc√™ morrer e as pessoas estiverem no seu vel√≥rio - o que voc√™ QUER que elas digam sobre voc√™? Qual legado voc√™ quer deixar?
                    </p>
                    <textarea id="voz3" placeholder="Eu quero que lembrem que eu..."></textarea>
                </div>

                <button class="btn" onclick="proximaCamada(9)">Continuar para Camada 9 ‚Üí</button>
            </div>

            <!-- CAMADA 9: TRABALHO DE PARTO -->
            <div class="card hidden" id="camada9">
                <div class="camada-titulo">
                    <span class="camada-numero">9</span>
                    <span>CAMADA 9: TRABALHO DE PARTO</span>
                </div>
                <p class="camada-metafora">
                    Met√°fora: O beb√™ se posiciona para nascer - prepara√ß√£o final, a s√≠ntese de tudo
                </p>

                <div class="pergunta">
                    <p class="pergunta-label">
                        <strong>Olhando para TUDO que voc√™ compartilhou at√© aqui - complete esta frase:</strong><br><br>
                        "Eu fui enviado para ___________________________________________."
                    </p>
                    <textarea id="parto1" placeholder="Eu fui enviado para..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        O que precisa NASCER atrav√©s de voc√™? O que Deus quer trazer ao mundo usando sua vida como canal?
                    </p>
                    <textarea id="parto2" placeholder="Precisa nascer atrav√©s de mim..."></textarea>
                </div>

                <div class="pergunta">
                    <p class="pergunta-label">
                        Se hoje fosse seu √∫ltimo dia na Terra, voc√™ estaria em paz com o que fez? Se n√£o, o que est√° faltando nascer?
                    </p>
                    <textarea id="parto3" placeholder="Est√° faltando..."></textarea>
                </div>

                <button class="btn" onclick="iniciarTrabalhoDeParto()">üî• Iniciar Trabalho de Parto</button>
            </div>
        </div>
    </div>

    <script>
        // ‚úÖ VALIDA√á√ÉO INTELIGENTE: M√≠nimo de caracteres espec√≠fico por campo
        const MIN_CARACTERES_POR_CAMPO = {
            // 1¬∫ TRIMESTRE: CONCEP√á√ÉO
            'concepcao1': 40,    // Hist√≥ria da inf√¢ncia - narrativa
            'concepcao2': 2,     // UMA √öNICA PALAVRA - literal
            'concepcao3': 10,    // Completar frase - curto
            
            // IMPLANTA√á√ÉO
            'implantacao1': 50,  // Dor profunda - reflex√£o profunda
            'implantacao2': 50,  // O que a dor ensinou - reflex√£o profunda
            'implantacao3': 40,  // Como pouparia outros - aplica√ß√£o
            
            // PRIMEIRO BATIMENTO
            'batimento1': 10,    // 3 valores - lista
            'batimento2': 20,    // Sentimento quando v√™ valores - descri√ß√£o
            'batimento3': 20,    // Rea√ß√£o quando valores pisoteados - descri√ß√£o
            
            // 2¬∫ TRIMESTRE: MEMBROS
            'membros1': 40,      // O que faz melhor - descri√ß√£o detalhada
            'membros2': 25,      // Problema que resolve - descri√ß√£o
            'membros3': 40,      // Projeto com recursos ilimitados - vis√£o
            
            // CHUTE
            'chute1': 40,        // Injusti√ßa que revolta - declara√ß√£o forte
            'chute2': 20,        // Uma coisa para mudar - declara√ß√£o
            'chute3': 10,        // Completar frase - curto
            
            // OLHOS
            'olhos1': 40,        // Quem enxerga - descri√ß√£o espec√≠fica
            'olhos2': 30,        // Rosto que v√™ - descri√ß√£o
            'olhos3': 40,        // Grupo para ver transformado - vis√£o
            
            // 3¬∫ TRIMESTRE: RESPIRA√á√ÉO
            'respiracao1': 30,   // Onde respira sozinho - descri√ß√£o
            'respiracao2': 10,   // Territ√≥rio para governar - pode ser curto
            'respiracao3': 10,   // Completar frase - curto
            
            // VOZ
            'voz1': 20,          // Verdade √∫nica - declara√ß√£o
            'voz2': 10,          // T√≠tulo de uma frase - curto
            'voz3': 40,          // Legado no vel√≥rio - reflex√£o profunda
            
            // TRABALHO DE PARTO
            'parto1': 40,        // Eu fui enviado para - declara√ß√£o de envio
            'parto2': 40,        // O que precisa nascer - vis√£o
            'parto3': 30         // Urg√™ncia/falta - reflex√£o
        };

        // ‚úÖ VALIDA√á√ÉO: Lista de todos os campos obrigat√≥rios (27 campos)
        const CAMPOS_OBRIGATORIOS = [
            'concepcao1', 'concepcao2', 'concepcao3',
            'implantacao1', 'implantacao2', 'implantacao3',
            'batimento1', 'batimento2', 'batimento3',
            'membros1', 'membros2', 'membros3',
            'chute1', 'chute2', 'chute3',
            'olhos1', 'olhos2', 'olhos3',
            'respiracao1', 'respiracao2', 'respiracao3',
            'voz1', 'voz2', 'voz3',
            'parto1', 'parto2', 'parto3'
        ];

        // Salvar automaticamente
        document.querySelectorAll('textarea').forEach(textarea => {
            textarea.addEventListener('input', function() {
                localStorage.setItem(this.id, this.value);
                
                // ‚úÖ Remove o estado de erro quando come√ßa a digitar
                if (this.classList.contains('invalid')) {
                    this.classList.remove('invalid');
                }
            });
            
            // Carregar valores salvos
            const saved = localStorage.getItem(textarea.id);
            if (saved) textarea.value = saved;
        });

        // ‚úÖ VALIDA√á√ÉO: Fun√ß√£o para validar campos de uma camada
        function validarCampos(campoIds) {
            const errorMessage = document.getElementById('error-message');
            let todosValidos = true;
            let primeiroCampoInvalido = null;

            // Remove estados de erro anteriores
            document.querySelectorAll('textarea.invalid').forEach(t => {
                t.classList.remove('invalid');
            });

            campoIds.forEach(campoId => {
                const campo = document.getElementById(campoId);
                const valor = (campo.value || '').trim();
                
                // ‚úÖ Usa o m√≠nimo espec√≠fico do campo
                const minimoEspecifico = MIN_CARACTERES_POR_CAMPO[campoId] || 50;

                if (valor.length < minimoEspecifico) {
                    campo.classList.add('invalid');
                    todosValidos = false;
                    
                    if (!primeiroCampoInvalido) {
                        primeiroCampoInvalido = campo;
                    }
                }
            });

            if (!todosValidos) {
                // Mostra mensagem de erro
                errorMessage.classList.add('show');
                
                // Scroll para o primeiro campo inv√°lido
                if (primeiroCampoInvalido) {
                    primeiroCampoInvalido.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'center' 
                    });
                    
                    // Foca no primeiro campo ap√≥s scroll
                    setTimeout(() => {
                        primeiroCampoInvalido.focus();
                    }, 500);
                }
                
                // Remove mensagem ap√≥s 5 segundos
                setTimeout(() => {
                    errorMessage.classList.remove('show');
                }, 5000);
            }

            return todosValidos;
        }

        function proximaCamada(numero) {
            // ‚úÖ Define quais campos validar baseado na camada atual
            let camposParaValidar = [];
            const camadaAtual = numero - 1;
            
            if (camadaAtual === 1) camposParaValidar = ['concepcao1', 'concepcao2', 'concepcao3'];
            else if (camadaAtual === 2) camposParaValidar = ['implantacao1', 'implantacao2', 'implantacao3'];
            else if (camadaAtual === 4) camposParaValidar = ['membros1', 'membros2', 'membros3'];
            else if (camadaAtual === 5) camposParaValidar = ['chute1', 'chute2', 'chute3'];
            else if (camadaAtual === 7) camposParaValidar = ['respiracao1', 'respiracao2', 'respiracao3'];
            else if (camadaAtual === 8) camposParaValidar = ['voz1', 'voz2', 'voz3'];

            // ‚úÖ Valida antes de avan√ßar
            if (camposParaValidar.length > 0 && !validarCampos(camposParaValidar)) {
                return; // Impede avan√ßo se valida√ß√£o falhar
            }

            document.getElementById(`camada${numero-1}`).classList.add('hidden');
            document.getElementById(`camada${numero}`).classList.remove('hidden');
            document.getElementById(`camada${numero}`).scrollIntoView({ behavior: 'smooth' });
            atualizarProgresso(numero);
        }

        function finalizarTrimestre1() {
            // ‚úÖ Valida camada 3 antes de finalizar
            if (!validarCampos(['batimento1', 'batimento2', 'batimento3'])) {
                return;
            }

            document.getElementById('camada3').classList.add('hidden');
            document.getElementById('transicao1').classList.remove('hidden');
            document.getElementById('transicao1').scrollIntoView({ behavior: 'smooth' });
        }

        function irParaTrimestre2() {
            document.getElementById('transicao1').classList.add('hidden');
            document.getElementById('trimestre2').classList.remove('hidden');
            document.getElementById('trimestre-label').textContent = '2¬∫ TRIMESTRE: DIFERENCIA√á√ÉO';
            document.getElementById('trimestre2').scrollIntoView({ behavior: 'smooth' });
            atualizarProgresso(4);
        }

        function finalizarTrimestre2() {
            // ‚úÖ Valida camada 6 antes de finalizar
            if (!validarCampos(['olhos1', 'olhos2', 'olhos3'])) {
                return;
            }

            document.getElementById('camada6').classList.add('hidden');
            document.getElementById('transicao2').classList.remove('hidden');
            document.getElementById('transicao2').scrollIntoView({ behavior: 'smooth' });
        }

        function irParaTrimestre3() {
            document.getElementById('transicao2').classList.add('hidden');
            document.getElementById('trimestre3').classList.remove('hidden');
            document.getElementById('trimestre-label').textContent = '3¬∫ TRIMESTRE: PREPARA√á√ÉO';
            document.getElementById('trimestre3').scrollIntoView({ behavior: 'smooth' });
            atualizarProgresso(7);
        }

        function atualizarProgresso(camada) {
            const progresso = (camada / 9) * 100;
            document.getElementById('progress').style.width = progresso + '%';
        }

        function iniciarTrabalhoDeParto() {
            // ‚úÖ VALIDA√á√ÉO FINAL: Valida camada 9
            if (!validarCampos(['parto1', 'parto2', 'parto3'])) {
                return;
            }

            // ‚úÖ VALIDA√á√ÉO CR√çTICA: Verifica TODOS os 27 campos antes de prosseguir
            if (!validarCampos(CAMPOS_OBRIGATORIOS)) {
                const errorMessage = document.getElementById('error-message');
                errorMessage.innerHTML = `
                    <p>‚ö†Ô∏è Ainda faltam campos para preencher!</p>
                    <small>Revise todas as camadas e complete os campos em amarelo.</small>
                `;
                errorMessage.classList.add('show');
                
                // Scroll para o topo
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                setTimeout(() => {
                    errorMessage.classList.remove('show');
                }, 7000);
                
                return;
            }

            // Salvar que completou
            localStorage.setItem('completou_diagnostico', 'true');
            
            // Redirecionar para resultado
            window.location.href = 'resultado-proposito.html';
        }
    </script>
</body>
</html>
