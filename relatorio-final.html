<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relat√≥rio Final - √ötero do Prop√≥sito</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #1a2b4a 0%, #2d4a7c 100%);
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px 60px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.6em;
            font-weight: 700;
            color: #d4af37;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(212, 175, 55, 0.3);
        }

        .header p {
            font-size: 1.1em;
            color: #5b8fd9;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-title {
            font-size: 1.4em;
            color: #d4af37;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .proposito-curto {
            font-size: 2.1em;
            font-weight: 800;
            text-align: center;
            margin: 10px 0 20px;
            color: #ffffff;
            text-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
        }

        .proposito-longo {
            font-size: 1.05em;
            line-height: 1.7;
            text-align: justify;
            color: #f0f3ff;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 20px;
        }

        .item-label {
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #5b8fd9;
            margin-bottom: 6px;
        }

        .item-text {
            font-size: 1em;
            line-height: 1.6;
            color: #ffffff;
        }

        .empty {
            opacity: 0.4;
            font-style: italic;
        }

        .footer-note {
            font-size: 0.9em;
            color: #9fb8ff;
            margin-top: 10px;
        }

        .btn-bar {
            margin-top: 25px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .btn {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #1a2b4a;
            border: none;
            padding: 12px 28px;
            font-size: 0.95em;
            font-weight: 600;
            border-radius: 999px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(212, 175, 55, 0.5);
        }

        .resumo-frases li {
            margin-bottom: 6px;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .card {
                padding: 22px;
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .proposito-curto {
                font-size: 1.6em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Relat√≥rio Final do √ötero do Prop√≥sito</h1>
            <p>S√≠ntese das respostas gestacionais de prop√≥sito</p>
        </div>

        <!-- DECLARA√á√ÉO CENTRAL -->
        <div class="card">
            <div class="section-title">1. Revela√ß√£o Central</div>
            <div id="proposito-curto" class="proposito-curto">PROP√ìSITO AINDA N√ÉO DEFINIDO</div>
            <p class="proposito-longo" id="proposito-longo">
                Preencha todas as camadas do √ötero do Prop√≥sito para que a sua declara√ß√£o de envio seja revelada aqui.
            </p>
            <p class="footer-note">
                ‚Ä¢ A frase em destaque √© a s√≠ntese curta do seu prop√≥sito (verbo + pessoas + condi√ß√£o).  
                ‚Ä¢ O par√°grafo abaixo traz a sua declara√ß√£o nas suas pr√≥prias palavras.
            </p>
        </div>

        <!-- MAPA EM 7 PONTOS -->
        <div class="card">
            <div class="section-title">2. Mapa do Prop√≥sito em 7 Pontos</div>
            <div class="grid">
                <div>
                    <div class="item-label">Ess√™ncia</div>
                    <div class="item-text" id="essencia"></div>
                </div>
                <div>
                    <div class="item-label">Palavra-Chave de Identidade</div>
                    <div class="item-text" id="palavra-identidade"></div>
                </div>
                <div>
                    <div class="item-label">Dor que te formou</div>
                    <div class="item-text" id="dor"></div>
                </div>
                <div>
                    <div class="item-label">Dom / Habilidade Natural</div>
                    <div class="item-text" id="dom"></div>
                </div>
                <div>
                    <div class="item-label">Causa que te indigna</div>
                    <div class="item-text" id="causa"></div>
                </div>
                <div>
                    <div class="item-label">Pessoas para quem voc√™ foi enviado</div>
                    <div class="item-text" id="pessoas"></div>
                </div>
                <div>
                    <div class="item-label">Territ√≥rio de Governo</div>
                    <div class="item-text" id="territorio"></div>
                </div>
                <div>
                    <div class="item-label">Mensagem / Voz</div>
                    <div class="item-text" id="mensagem"></div>
                </div>
            </div>
        </div>

        <!-- RESUMO EM 3 FRASES -->
        <div class="card">
            <div class="section-title">3. Resumo em 3 Frases</div>
            <ul class="resumo-frases" id="resumo-frases">
                <li id="frase1"></li>
                <li id="frase2"></li>
                <li id="frase3"></li>
            </ul>
            <p class="footer-note">
                Essas frases foram geradas a partir das suas respostas e podem ser refinadas junto em mentoria.
            </p>
        </div>

        <div class="btn-bar">
            <a href="utero-base.html" class="btn">‚¨Ö Voltar ao √ötero do Prop√≥sito</a>
            <button class="btn" onclick="window.print()">üñ® Gerar PDF / Imprimir</button>
        </div>
    </div>

    <script>
        function getOrEmpty(key) {
            const v = localStorage.getItem(key);
            return v && v.trim().length > 0 ? v.trim() : '';
        }

        function gerarDeclaracao(res) {
            let verbo = 'TRANSFORMAR';
            let substantivo = 'VIDAS';
            let adjetivo = 'PERDIDAS';

            const textoBase = (
                res.concepcao1 + ' ' +
                res.implantacao1 + ' ' +
                res.membros1 + ' ' +
                res.chute1 + ' ' +
                res.olhos1 + ' ' +
                res.respiracao2 + ' ' +
                res.voz1 + ' ' +
                res.parto1
            ).toLowerCase();

            // Verbo principal
            if (textoBase.includes('libert')) verbo = 'LIBERTAR';
            else if (textoBase.includes('curar') || textoBase.includes('cura') || textoBase.includes('restaur')) verbo = 'CURAR';
            else if (textoBase.includes('ensinar') || textoBase.includes('formar') || textoBase.includes('educar')) verbo = 'FORMAR';
            else if (textoBase.includes('constru') || textoBase.includes('edif')) verbo = 'CONSTRUIR';
            else if (textoBase.includes('despert') || textoBase.includes('revel')) verbo = 'DESPERTAR';

            // Destinat√°rios
            if (textoBase.includes('jovem') || textoBase.includes('adolesc')) substantivo = 'JOVENS';
            else if (textoBase.includes('mulher')) substantivo = 'MULHERES';
            else if (textoBase.includes('homem') || textoBase.includes('masculino') || textoBase.includes('pai')) substantivo = 'HOMENS';
            else if (textoBase.includes('l√≠der') || textoBase.includes('lider')) substantivo = 'L√çDERES';
            else if (textoBase.includes('crian√ßa')) substantivo = 'CRIAN√áAS';
            else if (textoBase.includes('empres') || textoBase.includes('empreend') || textoBase.includes('neg√≥cio')) substantivo = 'EMPREENDEDORES';

            // Condi√ß√£o
            if (textoBase.includes('ferido') || textoBase.includes('dor') || textoBase.includes('quebrado')) adjetivo = 'FERIDOS';
            else if (textoBase.includes('preso') || textoBase.includes('aprisionado') || textoBase.includes('cativo')) adjetivo = 'APRISIONADOS';
            else if (textoBase.includes('perdido') || textoBase.includes('sem rumo')) adjetivo = 'PERDIDOS';
            else if (textoBase.includes('√≥rf√£o') || textoBase.includes('abandona')) adjetivo = '√ìRF√ÉOS';

            const fraseCurta = `${verbo} ${substantivo} ${adjetivo}`;

            // Declara√ß√£o longa ‚Äì prefer√™ncia para o que a pessoa escreveu em "Eu fui enviado para..."
            let longa = res.parto1 || '';
            if (!longa && res.voz1) {
                longa = res.voz1;
            }

            return {
                curta: fraseCurta.toUpperCase(),
                longa: longa
            };
        }

        function preencherCampo(id, valor) {
            const el = document.getElementById(id);
            if (!el) return;
            if (!valor) {
                el.textContent = 'Ainda n√£o preenchido.';
                el.classList.add('empty');
            } else {
                el.textContent = valor;
            }
        }

        window.onload = function() {
            // Recuperar respostas principais
            const respostas = {
                concepcao1: getOrEmpty('concepcao1'),
                concepcao2: getOrEmpty('concepcao2'),
                implantacao1: getOrEmpty('implantacao1'),
                membros1: getOrEmpty('membros1'),
                membros2: getOrEmpty('membros2'),
                chute1: getOrEmpty('chute1'),
                olhos1: getOrEmpty('olhos1'),
                respiracao2: getOrEmpty('respiracao2'),
                voz1: getOrEmpty('voz1'),
                parto1: getOrEmpty('parto1')
            };

            // 1) Declara√ß√£o Central
            const declaracao = gerarDeclaracao(respostas);
            const curtoEl = document.getElementById('proposito-curto');
            const longoEl = document.getElementById('proposito-longo');

            if (respostas.concepcao1 || respostas.implantacao1 || respostas.parto1) {
                curtoEl.textContent = declaracao.curta;
                if (declaracao.longa) {
                    longoEl.textContent = declaracao.longa;
                } else {
                    longoEl.textContent = 'Sua declara√ß√£o longa ainda n√£o foi escrita. Use o campo "Eu fui enviado para..." na Camada 9 para descrev√™-la nas suas palavras.';
                }
            }

            // 2) Mapa em 7 pontos
            preencherCampo('essencia', respostas.concepcao1);
            preencherCampo('palavra-identidade', respostas.concepcao2);
            preencherCampo('dor', respostas.implantacao1);
            preencherCampo('dom', respostas.membros1 || respostas.membros2);
            preencherCampo('causa', respostas.chute1);
            preencherCampo('pessoas', respostas.olhos1);
            preencherCampo('territorio', respostas.respiracao2);
            preencherCampo('mensagem', respostas.voz1);

            // 3) Resumo em 3 frases
            const f1 = document.getElementById('frase1');
            const f2 = document.getElementById('frase2');
            const f3 = document.getElementById('frase3');

            f1.textContent = `‚Ä¢ Seu chamado central pode ser resumido em: ${declaracao.curta}.`;
            f2.textContent = respostas.implantacao1
                ? `‚Ä¢ A dor que mais te formou hoje se torna plataforma de autoridade: ${respostas.implantacao1}`
                : '‚Ä¢ A dor que te formou ainda n√£o foi descrita. Volte √† Camada 2 para detalhar isso.';
            f3.textContent = respostas.parto1
                ? `‚Ä¢ Em suas palavras, voc√™ entende que foi enviado para: ${respostas.parto1}`
                : '‚Ä¢ Use a frase "Eu fui enviado para..." na Camada 9 para escrever sua declara√ß√£o de envio.';

        };
    </script>
</body>
</html>
