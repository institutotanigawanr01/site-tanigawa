<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerar Contrato - Instituto Tanigawa</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #3b82f6;
            --primary-gold: #f59e0b;
            --dark-bg: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.5);
            --text-light: #e5e7eb;
            --text-gray: #9ca3af;
            --border-soft: rgba(148, 163, 184, 0.35);
            --radius-card: 20px;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background:
                radial-gradient(circle at 10% 0%, rgba(59, 130, 246, 0.45), transparent 55%),
                radial-gradient(circle at 90% 100%, rgba(236, 72, 153, 0.4), transparent 55%),
                radial-gradient(circle at 0% 100%, rgba(34, 197, 94, 0.35), transparent 60%),
                #020617;
            color: var(--text-light);
            min-height: 100vh;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 16px;
            padding: 1.5rem 2rem;
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 18px 50px rgba(15, 23, 42, 0.9);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            border-radius: 16px;
            background: radial-gradient(circle at 0 0, #f97316, #ec4899 40%, #3b82f6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Sora', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            color: #fff;
            box-shadow: 0 12px 30px rgba(15, 23, 42, 0.85);
        }

        .header-text {
            display: flex;
            flex-direction: column;
            gap: 0.15rem;
        }

        .header-subtitle {
            font-size: 0.75rem;
            letter-spacing: 0.16em;
            text-transform: uppercase;
            color: var(--text-gray);
        }

        .header-title {
            font-family: 'Sora', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 1.25rem;
            font-weight: 600;
        }

        .header-title span {
            background: linear-gradient(120deg, #60a5fa, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .badge-version {
            font-size: 0.75rem;
            padding: 0.35rem 0.8rem;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.5);
            color: var(--text-gray);
        }

        .btn-back {
            border-radius: 999px;
            border: 1px solid rgba(248, 250, 252, 0.3);
            background: rgba(15, 23, 42, 0.95);
            color: #e5e7eb;
            padding: 0.55rem 1.2rem;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-back:hover {
            background: rgba(30, 64, 175, 0.9);
            border-color: rgba(191, 219, 254, 0.8);
        }

        .layout {
            display: grid;
            grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.1fr);
            gap: 1.5rem;
        }

        .card {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.9));
            border-radius: var(--radius-card);
            padding: 1.5rem 1.6rem;
            border: 1px solid var(--border-soft);
            box-shadow: 0 18px 45px rgba(15, 23, 42, 0.95);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            inset: -60%;
            background:
                radial-gradient(circle at 0 0, rgba(59, 130, 246, 0.25), transparent 55%),
                radial-gradient(circle at 100% 100%, rgba(234, 88, 12, 0.18), transparent 60%);
            opacity: 0.35;
            pointer-events: none;
        }

        .card-inner {
            position: relative;
            z-index: 1;
        }

        .card-header {
            margin-bottom: 1rem;
        }

        .card-title {
            font-family: 'Sora', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .card-subtitle {
            font-size: 0.85rem;
            color: var(--text-gray);
        }

        .section-title {
            font-family: 'Sora', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            margin: 1rem 0 0.5rem;
            color: #e5e7eb;
        }

        .section-title span {
            font-size: 0.78rem;
            font-weight: 500;
            color: var(--text-gray);
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.9rem;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 0.9rem;
        }

        .grid-1 {
            display: grid;
            grid-template-columns: minmax(0, 1fr);
            gap: 0.9rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-gray);
            margin-bottom: 0.5rem;
        }

        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 8px;
            color: var(--text-light);
            font-size: 0.875rem;
            transition: all 0.3s;
        }

        input::placeholder, textarea::placeholder {
            color: #64748b;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: rgba(59, 130, 246, 0.9);
            box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.7);
        }

        textarea {
            resize: vertical;
            min-height: 60px;
        }

        .small-hint {
            font-size: 0.75rem;
            color: var(--text-gray);
        }

        .btn-primary {
            margin-top: 1rem;
            padding: 0.85rem 1.6rem;
            border-radius: 999px;
            border: none;
            background: linear-gradient(120deg, #22c55e, #16a34a);
            color: #ecfdf5;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 14px 32px rgba(22, 163, 74, 0.6);
            transition: all 0.3s;
        }

        .btn-primary:hover {
            filter: brightness(1.05);
            transform: translateY(-1px);
        }

        .btn-secondary {
            padding: 0.7rem 1.4rem;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            background: rgba(15, 23, 42, 0.9);
            color: var(--text-light);
            font-weight: 500;
            cursor: pointer;
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            border-color: rgba(191, 219, 254, 0.9);
            background: rgba(30, 64, 175, 0.9);
        }

        .actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.2rem;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.25rem 0.7rem;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.5);
            font-size: 0.75rem;
            color: var(--text-gray);
            margin-top: 0.4rem;
        }

        .badge span {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: #22c55e;
        }

        .preview-container {
            background: radial-gradient(circle at 0 0, rgba(148, 163, 184, 0.18), rgba(15, 23, 42, 0.98));
            border-radius: var(--radius-card);
            padding: 1.25rem 1.5rem;
            border: 1px solid rgba(148, 163, 184, 0.45);
            box-shadow: 0 18px 55px rgba(15, 23, 42, 0.95);
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .preview-title-block {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .preview-title {
            font-family: 'Sora', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 1.05rem;
            font-weight: 600;
        }

        .preview-subtitle {
            font-size: 0.8rem;
            color: var(--text-gray);
        }

        .preview-meta {
            text-align: right;
            font-size: 0.78rem;
            color: var(--text-gray);
        }

        .preview-content {
            background: rgba(15, 23, 42, 0.92);
            border-radius: 14px;
            padding: 1rem 1.1rem;
            border: 1px solid rgba(51, 65, 85, 0.9);
            max-height: 640px;
            overflow-y: auto;
        }

        .preview-content h2 {
            font-family: 'Sora', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 1rem;
            margin-bottom: 0.3rem;
        }

        .preview-content h3 {
            font-family: 'Sora', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 0.9rem;
            margin: 0.7rem 0 0.2rem;
        }

        .preview-content p {
            font-size: 0.78rem;
            line-height: 1.5;
            margin-bottom: 0.35rem;
            color: #d1d5db;
        }

        .preview-content ul {
            margin-left: 1.1rem;
            margin-bottom: 0.4rem;
        }

        .preview-content li {
            font-size: 0.76rem;
            line-height: 1.4;
            margin-bottom: 0.2rem;
            color: #cbd5f5;
        }

        .preview-footer {
            margin-top: 1rem;
            padding-top: 0.8rem;
            border-top: 1px dashed rgba(75, 85, 99, 0.7);
            font-size: 0.78rem;
            color: var(--text-gray);
        }

        .signature-blocks {
            margin-top: 1rem;
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 1.2rem;
        }

        .signature-line {
            border-top: 1px solid rgba(148, 163, 184, 0.7);
            padding-top: 0.4rem;
            font-size: 0.75rem;
            text-align: center;
            color: #cbd5f5;
        }

        .warning-box {
            margin-top: 1rem;
            padding: 0.7rem 0.85rem;
            border-radius: 12px;
            border: 1px solid rgba(234, 179, 8, 0.5);
            background: rgba(24, 20, 9, 0.95);
            font-size: 0.78rem;
            color: #facc15;
        }

        .warning-box strong {
            color: #fde68a;
        }

        @media (max-width: 1100px) {
            .layout {
                grid-template-columns: minmax(0, 1fr);
            }
        }

        @media (max-width: 640px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
                padding: 1.2rem 1.4rem;
            }

            .layout {
                gap: 1rem;
            }

            .card, .preview-container {
                padding: 1.2rem 1.2rem;
            }

            .header-right {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-left">
                <div class="logo-icon">IT</div>
                <div class="header-text">
                    <span class="header-subtitle">M√≥dulo administrativo</span>
                    <span class="header-title"><span>Gerar Contrato</span> ‚Ä¢ Instituto Tanigawa</span>
                </div>
            </div>
            <div class="header-right">
                <span class="badge-version">Vers√£o 2026 ‚Ä¢ Draft pedag√≥gico</span>
                <button class="btn-back" onclick="voltarDashboard()">
                    ‚Üê Voltar ao painel
                </button>
            </div>
        </header>

        <main class="layout">
            <section class="card">
                <div class="card-inner">
                    <div class="card-header">
                        <h1 class="card-title">Dados do Contrato</h1>
                        <p class="card-subtitle">
                            Preencha os campos abaixo para gerar o contrato personalizado da mentoria.
                        </p>
                        <div class="badge">
                            <span></span>
                            Fluxo integrado ao cadastro do mentorado
                        </div>
                    </div>

                    <div class="grid-1">
                        <h2 class="section-title">Dados principais do contratante <span>(mentorando)</span></h2>
                        <div class="grid-2">
                            <div class="form-group">
                                <label for="nomeContratante">Nome completo do contratante</label>
                                <input type="text" id="nomeContratante" placeholder="Nome completo do mentorando" oninput="atualizarPreview()">
                                <p class="small-hint">Puxado automaticamente do cadastro, mas pode ser ajustado aqui.</p>
                            </div>
                            <div class="form-group">
                                <label for="cpfContratante">CPF</label>
                                <input type="text" id="cpfContratante" placeholder="000.000.000-00" oninput="atualizarPreview()" maxlength="14">
                            </div>
                        </div>

                        <div class="grid-3">
                            <div class="form-group">
                                <label for="enderecoContratante">Endere√ßo</label>
                                <input type="text" id="enderecoContratante" placeholder="Rua, n√∫mero, complemento" oninput="atualizarPreview()">
                            </div>
                            <div class="form-group">
                                <label for="cidadeContratante">Cidade</label>
                                <input type="text" id="cidadeContratante" placeholder="Cidade" oninput="atualizarPreview()">
                            </div>
                            <div class="form-group">
                                <label for="estadoContratante">Estado (UF)</label>
                                <input type="text" id="estadoContratante" placeholder="UF" maxlength="2" oninput="atualizarPreview()">
                            </div>
                        </div>

                        <div class="grid-2">
                            <div class="form-group">
                                <label for="emailContratante">E-mail</label>
                                <input type="email" id="emailContratante" placeholder="email@exemplo.com" oninput="atualizarPreview()">
                            </div>
                            <div class="form-group">
                                <label for="telefoneContratante">Telefone</label>
                                <input type="text" id="telefoneContratante" placeholder="(00) 00000-0000" oninput="atualizarPreview()">
                            </div>
                        </div>

                        <h2 class="section-title">Dados da mentoria / programa</h2>
                        <div class="grid-2">
                            <div class="form-group">
                                <label for="nomeMentoria">Mentoria / Programa</label>
                                <input type="text" id="nomeMentoria" placeholder="Nome da mentoria ou programa" oninput="atualizarPreview()">
                            </div>
                            <div class="form-group">
                                <label for="modalidadeMentoria">Modalidade</label>
                                <select id="modalidadeMentoria" onchange="atualizarPreview()">
                                    <option value="online">Online</option>
                                    <option value="presencial">Presencial</option>
                                    <option value="hibrida">H√≠brida</option>
                                </select>
                            </div>
                        </div>

                        <div class="grid-3">
                            <div class="form-group">
                                <label for="duracaoMentoria">Dura√ß√£o</label>
                                <input type="text" id="duracaoMentoria" placeholder="Ex: 6 meses, 10 encontros..." oninput="atualizarPreview()">
                            </div>
                            <div class="form-group">
                                <label for="frequenciaEncontros">Frequ√™ncia dos encontros</label>
                                <input type="text" id="frequenciaEncontros" placeholder="Semanal, quinzenal..." oninput="atualizarPreview()">
                            </div>
                            <div class="form-group">
                                <label for="cargaHoraria">Carga hor√°ria total</label>
                                <input type="text" id="cargaHoraria" placeholder="Ex: 30 horas" oninput="atualizarPreview()">
                            </div>
                        </div>

                        <h2 class="section-title">Local, data e valores</h2>
                        <div class="grid-3">
                            <div class="form-group">
                                <label for="cidadeContrato">Cidade assinatura</label>
                                <input type="text" id="cidadeContrato" placeholder="Cidade" oninput="atualizarPreview()">
                            </div>
                            <div class="form-group">
                                <label for="dataContrato">Data</label>
                                <input type="date" id="dataContrato" onchange="atualizarPreview()">
                            </div>
                            <div class="form-group">
                                <label for="estadoContrato">Estado (UF)</label>
                                <input type="text" id="estadoContrato" placeholder="UF" maxlength="2" oninput="atualizarPreview()">
                            </div>
                        </div>

                        <div class="grid-3">
                            <div class="form-group">
                                <label for="valorTotal">Valor total (R$)</label>
                                <input type="text" id="valorTotal" placeholder="R$ 0,00" oninput="atualizarPreview()">
                            </div>
                            <div class="form-group">
                                <label for="quantidadeParcelas">Quantidade de parcelas</label>
                                <input type="number" id="quantidadeParcelas" placeholder="1, 3, 6, 12..." oninput="atualizarPreview()">
                            </div>
                            <div class="form-group">
                                <label for="valorParcela">Valor de cada parcela (R$)</label>
                                <input type="text" id="valorParcela" placeholder="R$ 0,00" oninput="atualizarPreview()">
                            </div>
                        </div>

                        <div class="grid-2">
                            <div class="form-group">
                                <label for="formaPagamento">Forma de pagamento</label>
                                <input type="text" id="formaPagamento" placeholder="PIX, cart√£o, boleto, recorr√™ncia..." oninput="atualizarPreview()">
                                <p class="small-hint">Se houver recorr√™ncia mensal, especificar aqui.</p>
                            </div>
                            <div class="form-group">
                                <label for="indiceReajuste">√çndice de reajuste</label>
                                <input type="text" id="indiceReajuste" placeholder="Ex: IPCA, anual, sem reajuste..." oninput="atualizarPreview()">
                            </div>
                        </div>

                        <h2 class="section-title">Particularidades pedag√≥gicas</h2>
                        <div class="grid-1">
                            <div class="form-group">
                                <label for="escopoMentoria">Escopo / foco principal da mentoria</label>
                                <textarea id="escopoMentoria" placeholder="Resumo do prop√≥sito da mentoria (vida, espiritual, financeiro, governo, mentalidade...)"
                                          oninput="atualizarPreview()"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="observacoesEspeciais">Observa√ß√µes espec√≠ficas do contratante</label>
                                <textarea id="observacoesEspeciais" placeholder="Alguma condi√ß√£o espec√≠fica, acordos diferenciados, b√¥nus individuais..."
                                          oninput="atualizarPreview()"></textarea>
                            </div>
                        </div>

                        <div class="actions">
                            <button class="btn-primary" onclick="gerarContratoPDF()">
                                Gerar contrato em PDF
                            </button>
                            <button class="btn-secondary" onclick="preencherComExemplo()">
                                Preencher com exemplo
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="preview-container">
                <div class="preview-header">
                    <div class="preview-title-block">
                        <h2 class="preview-title">Pr√©-visualiza√ß√£o do contrato</h2>
                        <p class="preview-subtitle">
                            Este texto √© um modelo pedag√≥gico, que ser√° ajustado por advogado especializado antes de uso jur√≠dico.
                        </p>
                    </div>
                    <div class="preview-meta">
                        <div id="previewCidadeData"></div>
                        <div>Vers√£o did√°tica ‚Ä¢ 2026</div>
                    </div>
                </div>

                <div class="preview-content" id="previewContrato">
                    <!-- Conte√∫do do contrato √© preenchido via JavaScript -->
                </div>

                <div class="preview-footer">
                    <p>
                        üìå <strong>Aten√ß√£o:</strong> Este modelo √© uma base pedag√≥gica, constru√≠da para ilustrar o fluxo da mentoria e os compromissos entre as partes.
                        Antes de ser utilizado como instrumento jur√≠dico vinculante, deve ser revisado, adaptado e validado por advogado de confian√ßa da parte contratante,
                        considerando a legisla√ß√£o vigente, especificidades da mentoria e eventuais adequa√ß√µes necess√°rias.
                    </p>
                    <div class="warning-box">
                        <strong>Importante:</strong> O Instituto Tanigawa, Sergio Tanigawa e seus representantes n√£o se responsabilizam pelo uso jur√≠dico deste documento
                        sem pr√©via revis√£o profissional. Esta ferramenta foi criada para fins de organiza√ß√£o pedag√≥gica do programa de mentoria e alinhamento de expectativas.
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // ============================================
        // FUN√á√ïES DE INICIALIZA√á√ÉO
        // ============================================

        window.addEventListener('DOMContentLoaded', function() {
            carregarDadosMentorado();
            configurarEventos();
            atualizarPreview();
        });

        function carregarDadosMentorado() {
            const mentoradoAtual = JSON.parse(localStorage.getItem('currentMentorado') || '{}');
            
            if (mentoradoAtual.nome) {
                document.getElementById('nomeContratante').value = mentoradoAtual.nome || '';
                document.getElementById('emailContratante').value = mentoradoAtual.email || '';
                document.getElementById('telefoneContratante').value = mentoradoAtual.telefone || '';
                document.getElementById('cidadeContratante').value = mentoradoAtual.cidade || '';
                document.getElementById('estadoContratante').value = mentoradoAtual.estado || '';
                document.getElementById('nomeMentoria').value = mentoradoAtual.mentoria || '';
                document.getElementById('formaPagamento').value = mentoradoAtual.formaPagamento || '';
                document.getElementById('duracaoMentoria').value = mentoradoAtual.duracao || '';
                document.getElementById('frequenciaEncontros').value = mentoradoAtual.frequencia || '';
                document.getElementById('valorTotal').value = mentoradoAtual.valorTotal || '';
                document.getElementById('valorParcela').value = mentoradoAtual.valorParcela || '';
                document.getElementById('quantidadeParcelas').value = mentoradoAtual.qtdParcelas || '';

                if (mentoradoAtual.dataInicio) {
                    document.getElementById('dataContrato').value = mentoradoAtual.dataInicio;
                }
            }

            atualizarPreview();
        }

        function configurarEventos() {
            const camposValor = ['valorTotal', 'valorParcela'];
            camposValor.forEach(id => {
                const campo = document.getElementById(id);
                campo.addEventListener('blur', () => formatarValor(id));
            });

            const campoCPF = document.getElementById('cpfContratante');
            campoCPF.addEventListener('input', (e) => {
                e.target.value = mascaraCPF(e.target.value);
            });

            const campoTelefone = document.getElementById('telefoneContratante');
            campoTelefone.addEventListener('input', (e) => {
                e.target.value = mascaraTelefone(e.target.value);
            });
        }

        function formatarValor(campoId) {
            const input = document.getElementById(campoId);
            let valor = input.value.replace(/[^\d,]/g, '').replace(',', '.');

            if (!valor) return;

            const numero = parseFloat(valor);
            if (!isNaN(numero)) {
                input.value = 'R$ ' + numero.toFixed(2).replace('.', ',');
            }
        }

        // ============================================
        // FUN√á√ïES DE M√ÅSCARA
        // ============================================

        function mascaraCPF(valor) {
            valor = valor.replace(/\D/g, '');
            valor = valor.replace(/(\d{3})(\d)/, '$1.$2');
            valor = valor.replace(/(\d{3})(\d)/, '$1.$2');
            valor = valor.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            return valor;
        }

        function mascaraTelefone(valor) {
            valor = valor.replace(/\D/g, '');
            valor = valor.replace(/^(\d{2})(\d)/g, '($1) $2');
            valor = valor.replace(/(\d{5})(\d{4})$/, '$1-$2');
            return valor;
        }

        // ============================================
        // GERA√á√ÉO DO CONTRATO
        // ============================================

        function atualizarPreview() {
            const nomeContratante = document.getElementById('nomeContratante').value || 'NOME COMPLETO DO CONTRATANTE';
            const cpfContratante = document.getElementById('cpfContratante').value || '000.000.000-00';
            const enderecoContratante = document.getElementById('enderecoContratante').value || 'Endere√ßo completo do contratante';
            const cidadeContratante = document.getElementById('cidadeContratante').value || 'Cidade';
            const estadoContratante = document.getElementById('estadoContratante').value || 'UF';
            const emailContratante = document.getElementById('emailContratante').value || 'email@exemplo.com';
            const telefoneContratante = document.getElementById('telefoneContratante').value || '(00) 00000-0000';

            const nomeMentoria = document.getElementById('nomeMentoria').value || 'Nome da Mentoria / Programa';
            const modalidadeMentoria = document.getElementById('modalidadeMentoria').value || 'online';
            const duracaoMentoria = document.getElementById('duracaoMentoria').value || 'Dura√ß√£o da mentoria';
            const frequenciaEncontros = document.getElementById('frequenciaEncontros').value || 'Frequ√™ncia dos encontros';
            const cargaHoraria = document.getElementById('cargaHoraria').value || 'Carga hor√°ria total';

            const cidadeContrato = document.getElementById('cidadeContrato').value || 'Cidade';
            const estadoContrato = document.getElementById('estadoContrato').value || 'UF';
            const dataContrato = document.getElementById('dataContrato').value;
            const valorTotal = document.getElementById('valorTotal').value || 'R$ 0,00';
            const quantidadeParcelas = document.getElementById('quantidadeParcelas').value || '1';
            const valorParcela = document.getElementById('valorParcela').value || 'R$ 0,00';
            const formaPagamento = document.getElementById('formaPagamento').value || 'Forma de pagamento a ser definida';
            const indiceReajuste = document.getElementById('indiceReajuste').value || 'Sem reajuste durante a vig√™ncia da mentoria';

            const escopoMentoria = document.getElementById('escopoMentoria').value || 'Escopo principal da mentoria, objetivos gerais e prop√≥sito desta jornada.';
            const observacoesEspeciais = document.getElementById('observacoesEspeciais').value || 'Observa√ß√µes espec√≠ficas, quando houver, ser√£o inclu√≠das aqui.';

            const dataFormatada = dataContrato ? formatarDataBrasileira(dataContrato) : '____ de __________________ de ______';
            const previewCidadeData = `${cidadeContrato || 'Cidade'}/${estadoContrato || 'UF'}, ${dataFormatada}`;
            document.getElementById('previewCidadeData').textContent = previewCidadeData;

            const html = `
                <h2>CONTRATO DE PRESTA√á√ÉO DE SERVI√áOS DE MENTORIA</h2>
                <p>
                    Pelo presente instrumento particular de CONTRATO DE PRESTA√á√ÉO DE SERVI√áOS DE MENTORIA, de um lado,
                    <strong>${nomeContratante}</strong>, inscrito(a) no CPF sob o n¬∫ <strong>${cpfContratante}</strong>,
                    residente e domiciliado(a) em <strong>${enderecoContratante}, ${cidadeContratante} - ${estadoContratante}</strong>,
                    endere√ßo eletr√¥nico <strong>${emailContratante}</strong> e telefone <strong>${telefoneContratante}</strong>,
                    doravante denominado(a) simplesmente <strong>CONTRATANTE</strong>;
                </p>
                <p>
                    E, de outro lado, <strong>SERGIO TANIGAWA</strong>, mentor, pastor e respons√°vel pelo
                    <strong>Instituto Tanigawa</strong>, doravante denominado simplesmente <strong>CONTRATADO</strong>,
                    t√™m entre si, justa e contratada, a presta√ß√£o de servi√ßos de mentoria, que ser√° regida pelas cl√°usulas e condi√ß√µes seguintes:
                </p>

                <h3>CL√ÅUSULA 1¬™ - DO OBJETO</h3>
                <p>
                    <strong>1.1.</strong> O presente contrato tem por objeto a presta√ß√£o de servi√ßos de mentoria, acompanhamento e aconselhamento no programa
                    denominado <strong>${nomeMentoria}</strong>, na modalidade <strong>${modalidadeMentoria}</strong>, com foco em
                    <strong>${escopoMentoria}</strong>.
                </p>
                <p>
                    <strong>1.2.</strong> A mentoria ter√° dura√ß√£o aproximada de <strong>${duracaoMentoria}</strong>, com encontros
                    realizados com frequ√™ncia <strong>${frequenciaEncontros}</strong>, totalizando uma carga hor√°ria estimada de
                    <strong>${cargaHoraria}</strong>, podendo haver ajustes mediante alinhamento entre as partes.
                </p>

                <h3>CL√ÅUSULA 2¬™ - DA NATUREZA DA MENTORIA</h3>
                <p>
                    <strong>2.1.</strong> A mentoria oferecida pelo CONTRATADO possui car√°ter <strong>pedag√≥gico, estrat√©gico e de aconselhamento</strong>,
                    com √™nfase em transforma√ß√£o de mentalidade, alinhamento espiritual, emocional, comportamental e, quando aplic√°vel,
                    financeiro e de governo.
                </p>
                <p>
                    <strong>2.2.</strong> A mentoria n√£o substitui tratamento m√©dico, psicol√≥gico, psiqui√°trico, terap√™utico,
                    cont√°bil, jur√≠dico ou qualquer outra forma de acompanhamento profissional regulamentado. Sempre que necess√°rio,
                    o CONTRATANTE ser√° orientado a buscar ajuda t√©cnica especializada.
                </p>
                <p>
                    <strong>2.3.</strong> Os conte√∫dos compartilhados, exemplos, conselhos, direcionamentos e protocolos aplicados
                    durante a mentoria s√£o provenientes da experi√™ncia pessoal, espiritual, ministerial, intelectual e profissional
                    do CONTRATADO, bem como de referenciais b√≠blicos, pr√°ticos e pedag√≥gicos.
                </p>

                <h3>CL√ÅUSULA 3¬™ - DA DIN√ÇMICA E DOS ENCONTROS</h3>
                <p>
                    <strong>3.1.</strong> Os encontros acontecer√£o na modalidade <strong>${modalidadeMentoria}</strong>, em datas e hor√°rios
                    previamente alinhados entre as partes, podendo ocorrer de forma individual, em grupo reduzido ou em ambiente h√≠brido,
                    conforme o formato da mentoria contratada.
                </p>
                <p>
                    <strong>3.2.</strong> Eventuais remarca√ß√µes dever√£o ser solicitadas com anteced√™ncia m√≠nima de 24 (vinte e quatro) horas,
                    salvo situa√ß√µes emergenciais, e estar√£o sujeitas √† disponibilidade de agenda do CONTRATADO.
                </p>
                <p>
                    <strong>3.3.</strong> O n√£o comparecimento do CONTRATANTE ao encontro agendado, sem aviso pr√©vio dentro do prazo estabelecido,
                    poder√° ser considerado como <strong>encontro realizado</strong>, n√£o gerando obrigatoriedade de reposi√ß√£o por parte do CONTRATADO.
                </p>

                <h3>CL√ÅUSULA 4¬™ - DO VALOR, PAGAMENTO E REAJUSTE</h3>
                <p>
                    <strong>4.1.</strong> Pelo servi√ßo de mentoria contratado, o CONTRATANTE pagar√° ao CONTRATADO o valor total de
                    <strong>${valorTotal}</strong>, que poder√° ser quitado em <strong>${quantidadeParcelas}</strong> parcela(s) de
                    <strong>${valorParcela}</strong>, conforme acordado entre as partes.
                </p>
                <p>
                    <strong>4.2.</strong> A forma de pagamento ser√°: <strong>${formaPagamento}</strong>.
                </p>
                <p>
                    <strong>4.3.</strong> O √≠ndice de reajuste, quando aplic√°vel, ser√°: <strong>${indiceReajuste}</strong>, respeitada
                    a legisla√ß√£o vigente √† √©poca.
                </p>
                <p>
                    <strong>4.4.</strong> O atraso no pagamento poder√° ensejar a suspens√£o tempor√°ria do acesso √† mentoria e √†s suas ferramentas,
                    at√© a regulariza√ß√£o dos valores em aberto.
                </p>

                <h3>CL√ÅUSULA 5¬™ - DA CONFIDENCIALIDADE</h3>
                <p>
                    <strong>5.1.</strong> Todas as informa√ß√µes pessoais, relatos, hist√≥rias, estrat√©gias e conte√∫dos compartilhados
                    pelo CONTRATANTE durante a mentoria ser√£o tratados com sigilo e respeito pelo CONTRATADO, resguardadas as hip√≥teses
                    em que houver risco √† integridade f√≠sica do pr√≥prio CONTRATANTE ou de terceiros.
                </p>
                <p>
                    <strong>5.2.</strong> Da mesma forma, o CONTRATANTE se compromete a n√£o divulgar materiais, processos, frameworks,
                    metodologias, √°udios, v√≠deos, apostilas e demais conte√∫dos protegidos por direitos autorais e propriedade intelectual
                    do CONTRATADO, salvo quando expressamente autorizado.
                </p>

                <h3>CL√ÅUSULA 6¬™ - DA PROPRIEDADE INTELECTUAL</h3>
                <p>
                    <strong>6.1.</strong> Todo o conte√∫do disponibilizado durante a mentoria ‚Äì incluindo, mas n√£o se limitando a slides, apostilas,
                    v√≠deos, planilhas, estruturas, perguntas, protocolos, frameworks e materiais complementares ‚Äì √© de uso exclusivo do CONTRATANTE
                    para fins pessoais e intransfer√≠veis.
                </p>
                <p>
                    <strong>6.2.</strong> N√£o √© permitida a reprodu√ß√£o, distribui√ß√£o, comercializa√ß√£o, sublicenciamento ou disponibiliza√ß√£o p√∫blica
                    dos materiais, seja de forma gratuita ou onerosa, sem autoriza√ß√£o expressa e por escrito do CONTRATADO.
                </p>

                <h3>CL√ÅUSULA 7¬™ - DOS RESULTADOS E RESPONSABILIDADES</h3>
                <p>
                    <strong>7.1.</strong> A mentoria tem como objetivo oferecer ferramentas, direcionamento, clareza, alinhamento de prop√≥sito
                    e estrat√©gias pr√°ticas, por√©m os resultados depender√£o diretamente do n√≠vel de comprometimento, aplica√ß√£o, obedi√™ncia,
                    responsabilidade e const√¢ncia do CONTRATANTE.
                </p>
                <p>
                    <strong>7.2.</strong> O CONTRATADO n√£o garante resultados espec√≠ficos financeiros, espirituais, emocionais, familiares,
                    empresariais ou ministeriais, uma vez que tais resultados decorrem de m√∫ltiplos fatores externos e internos,
                    incluindo decis√µes pessoais, circunst√¢ncias, hist√≥rico de vida e contexto do CONTRATANTE.
                </p>
                <p>
                    <strong>7.3.</strong> A mentoria n√£o substitui consagra√ß√£o, busca espiritual, disciplina pessoal, consulta √† Palavra de Deus
                    e submiss√£o √† lideran√ßa espiritual local, quando houver.
                </p>

                <h3>CL√ÅUSULA 8¬™ - DA RESCIS√ÉO</h3>
                <p>
                    <strong>8.1.</strong> O presente contrato poder√° ser rescindido por qualquer das partes, mediante comunica√ß√£o pr√©via,
                    por escrito, com anteced√™ncia m√≠nima de 15 (quinze) dias, observado o equil√≠brio financeiro e o pagamento proporcional
                    pelos servi√ßos j√° prestados.
                </p>
                <p>
                    <strong>8.2.</strong> Em caso de desist√™ncia imotivada por parte do CONTRATANTE, poder√£o ser cobrados valores proporcionais,
                    bem como eventualmente retida parte do montante j√° pago, a t√≠tulo de compensa√ß√£o pelos compromissos de agenda assumidos
                    e pelo conte√∫do j√° disponibilizado.
                </p>

                <h3>CL√ÅUSULA 9¬™ - DA PROTE√á√ÉO DE DADOS</h3>
                <p>
                    <strong>9.1.</strong> As partes declaram estar cientes da Lei Geral de Prote√ß√£o de Dados Pessoais (Lei n¬∫ 13.709/2018 ‚Äì LGPD),
                    comprometendo-se a tratar os dados pessoais eventualmente compartilhados neste contrato de forma √©tica, segura e para fins pedag√≥gicos.</p>
                <p><strong>9.2.</strong> Os dados pessoais ser√£o utilizados exclusivamente para as finalidades relacionadas √† mentoria,
                    comunica√ß√£o entre as partes, emiss√£o de documentos, notas fiscais e registros internos.</p>
                <p><strong>9.3.</strong> O CONTRATANTE tem direito de solicitar, a qualquer tempo, acesso, corre√ß√£o ou atualiza√ß√£o dos seus dados
                    pessoais, bem como requerer, quando cab√≠vel, a exclus√£o de dados; d) solicitar a portabilidade dos dados.</p>
                <p><strong>9.4.</strong> Os dados ser√£o compartilhados apenas com parceiros estrat√©gicos estritamente necess√°rios √† execu√ß√£o dos servi√ßos
                    (como plataformas de v√≠deo, sistemas de pagamento, ferramentas de videoconfer√™ncia, armazenamento em nuvem, processamento de pagamentos).</p>
                <p><strong>9.5.</strong> Todas as medidas de seguran√ßa razo√°veis ser√£o adotadas para proteger os dados contra acessos n√£o autorizados.</p>

                <h3>CL√ÅUSULA 10¬™ - DO TERMO DE GRAVA√á√ÉO</h3>
                <p><strong>10.1.</strong> O CONTRATANTE declara estar ciente de que as sess√µes de mentoria poder√£o ser gravadas, total ou parcialmente,
                    em √°udio e/ou v√≠deo, com o objetivo de permitir que o pr√≥prio CONTRATANTE revise os conte√∫dos e registre sua jornada.</p>
                <p><strong>10.2.</strong> O CONTRATANTE consente que tais grava√ß√µes sejam armazenadas em ambiente digital seguro, de uso restrito,
                    e que o acesso ser√° concedido prioritariamente ao pr√≥prio CONTRATANTE, podendo, em alguns casos, o CONTRATADO utilizar
                    trechos de forma anonimizada para fins exclusivos de acompanhamento pedag√≥gico e revis√£o pessoal.</p>
                <p><strong>10.3.</strong> As grava√ß√µes t√™m uso estritamente pessoal e pedag√≥gico, sendo vedado ao CONTRATANTE:</p>
                <p>a) Compartilhar as grava√ß√µes em redes sociais ou plataformas p√∫blicas;</p>
                <p>b) Distribuir, comercializar ou reproduzir o conte√∫do gravado;</p>
                <p>c) Editar ou modificar as grava√ß√µes de qualquer forma.</p>
                <p><strong>10.4.</strong> O descumprimento desta cl√°usula poder√° ensejar responsabiliza√ß√£o civil, penal e repara√ß√£o por danos cab√≠veis,
                    incluindo indeniza√ß√£o por danos morais e materiais.</p>

                <h3>CL√ÅUSULA 11¬™ - DAS DISPOSI√á√ïES GERAIS</h3>
                <p><strong>11.1.</strong> Este contrato √© celebrado em ambiente digital, sendo considerado v√°lido mediante aceita√ß√£o eletr√¥nica,
                    pagamento do valor acordado e participa√ß√£o efetiva na mentoria.</p>
                <p><strong>11.2.</strong> As partes elegem o foro da comarca de ${cidadeContrato || 'Cidade'}/${estadoContrato || 'UF'},
                    com ren√∫ncia expressa a qualquer outro, por mais privilegiado que seja, para dirimir eventuais controv√©rsias oriundas
                    deste contrato, observados os princ√≠pios da boa-f√©, di√°logo e reconcilia√ß√£o sempre que poss√≠vel.</p>

                <p style="margin-top: 0.8rem;">
                    E, por estarem assim justas e contratadas, firmam o presente instrumento em meio digital,
                    cientes de que este √© um modelo pedag√≥gico que dever√° ser revisado por profissional jur√≠dico
                    antes de sua utiliza√ß√£o como documento definitivo.
                </p>

                <div class="signature-blocks">
                    <div class="signature-line">
                        ${nomeContratante}<br>
                        CONTRATANTE
                    </div>
                    <div class="signature-line">
                        Sergio Tanigawa<br>
                        CONTRATADO / MENTOR
                    </div>
                </div>
            `;

            document.getElementById('previewContrato').innerHTML = html;
        }

        function formatarDataBrasileira(dataISO) {
            const [ano, mes, dia] = dataISO.split('-');
            const meses = [
                'janeiro', 'fevereiro', 'mar√ßo', 'abril', 'maio', 'junho',
                'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'
            ];
            const mesExtenso = meses[parseInt(mes, 10) - 1] || '__________';
            return `${dia} de ${mesExtenso} de ${ano}`;
        }

        // ============================================
        // EXEMPLO R√ÅPIDO
        // ============================================

        function preencherComExemplo() {
            document.getElementById('nomeContratante').value = 'Jo√£o da Silva Exemplo';
            document.getElementById('cpfContratante').value = '123.456.789-00';
            document.getElementById('enderecoContratante').value = 'Rua Exemplo, 123, Apto 45';
            document.getElementById('cidadeContratante').value = 'S√£o Paulo';
            document.getElementById('estadoContratante').value = 'SP';
            document.getElementById('emailContratante').value = 'joao.exemplo@email.com';
            document.getElementById('telefoneContratante').value = '(11) 91234-5678';

            document.getElementById('nomeMentoria').value = 'Mentoria SYNESIS ‚Äì Governo & Prop√≥sito';
            document.getElementById('modalidadeMentoria').value = 'online';
            document.getElementById('duracaoMentoria').value = '6 meses';
            document.getElementById('frequenciaEncontros').value = 'Encontros quinzenais';
            document.getElementById('cargaHoraria').value = '24 horas totais';

            document.getElementById('cidadeContrato').value = 'Barueri';
            document.getElementById('estadoContrato').value = 'SP';
            const hoje = new Date();
            const ano = hoje.getFullYear();
            const mes = String(hoje.getMonth() + 1).padStart(2, '0');
            const dia = String(hoje.getDate()).padStart(2, '0');
            document.getElementById('dataContrato').value = `${ano}-${mes}-${dia}`;

            document.getElementById('valorTotal').value = 'R$ 9.997,00';
            document.getElementById('quantidadeParcelas').value = '6';
            document.getElementById('valorParcela').value = 'R$ 1.666,17';
            document.getElementById('formaPagamento').value = 'Cart√£o de cr√©dito em 6x ou PIX √† vista';
            document.getElementById('indiceReajuste').value = 'Sem reajuste para esta turma';

            document.getElementById('escopoMentoria').value =
                'Mentoria voltada para alinhamento de prop√≥sito, governo espiritual, transforma√ß√£o de mentalidade e estrutura√ß√£o de decis√µes de alto n√≠vel, ' +
                'integrando vida, fam√≠lia, minist√©rio e finan√ßas sob a perspectiva b√≠blica e prof√©tica.';
            document.getElementById('observacoesEspeciais').value =
                'Inclui acesso a conte√∫dos complementares, materiais em PDF, protocolos de ora√ß√£o e exerc√≠cios pr√°ticos semanais.';

            atualizarPreview();
        }

        // ============================================
        // GERA√á√ÉO DE PDF (PLACEHOLDER)
        // ============================================

        function gerarContratoPDF() {
            alert('Em breve, este m√≥dulo ir√° gerar o PDF automaticamente com base neste modelo. Por enquanto, voc√™ pode copiar o texto e colar em um editor para ajustes adicionais.');
        }

        // ============================================
        // NAVEGA√á√ÉO
        // ============================================

        function voltarDashboard() {
            if (confirm('Tem certeza que deseja voltar? As altera√ß√µes n√£o salvas ser√£o perdidas.')) {
                window.location.href = 'admin_dashboard.html';
            }
        }
    </script>
</body>
</html>
